import{D as e,Z as a,f as l,o as t,c as s,w as c,a as r,z as n,r as o,b as i,t as u,p as h,d,_ as f,i as m,e as p,T as y,g as b,h as _,F as g,O as v,U as x,n as k}from"./index-CTVgZndQ.js";import{_ as V}from"./uni-icons.B3m6PdPA.js";import{_ as S,r as w}from"./uni-app.es.CwYrt2Mn.js";const C={en:{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"Search enter content"},"zh-Hans":{"uni-search-bar.cancel":"取消","uni-search-bar.placeholder":"请输入搜索内容"},"zh-Hant":{"uni-search-bar.cancel":"取消","uni-search-bar.placeholder":"請輸入搜索內容"}},{t:$}=e(C);const B=S({name:"UniSearchBar",emits:["input","update:modelValue","clear","cancel","confirm","blur","focus"],props:{placeholder:{type:String,default:""},radius:{type:[Number,String],default:5},clearButton:{type:String,default:"auto"},cancelButton:{type:String,default:"auto"},cancelText:{type:String,default:""},bgColor:{type:String,default:"#F8F8F8"},textColor:{type:String,default:"#000000"},maxlength:{type:[Number,String],default:100},value:{type:[Number,String],default:""},modelValue:{type:[Number,String],default:""},focus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},data:()=>({show:!1,showSync:!1,searchVal:""}),computed:{cancelTextI18n(){return this.cancelText||$("uni-search-bar.cancel")},placeholderText(){return this.placeholder||$("uni-search-bar.placeholder")}},watch:{modelValue:{immediate:!0,handler(e){this.searchVal=e,e&&(this.show=!0)}},focus:{immediate:!0,handler(e){if(e){if(this.readonly)return;this.show=!0,this.$nextTick((()=>{this.showSync=!0}))}}},searchVal(e,a){this.$emit("input",e),this.$emit("update:modelValue",e)}},methods:{searchClick(){this.readonly||this.show||(this.show=!0,this.$nextTick((()=>{this.showSync=!0})))},clear(){this.searchVal="",this.$nextTick((()=>{this.$emit("clear",{value:""})}))},cancel(){this.readonly||(this.$emit("cancel",{value:this.searchVal}),this.searchVal="",this.show=!1,this.showSync=!1,a())},confirm(){a(),this.$emit("confirm",{value:this.searchVal})},blur(){a(),this.$emit("blur",{value:this.searchVal})},emitFocus(e){this.$emit("focus",e.detail)}}},[["render",function(e,a,p,y,b,_){const g=w(l("uni-icons"),V),v=d,x=f,k=m;return t(),s(v,{class:"uni-searchbar"},{default:c((()=>[r(v,{style:n({borderRadius:p.radius+"px",backgroundColor:p.bgColor}),class:"uni-searchbar__box",onClick:_.searchClick},{default:c((()=>[r(v,{class:"uni-searchbar__box-icon-search"},{default:c((()=>[o(e.$slots,"searchIcon",{},(()=>[r(g,{color:"#c0c4cc",size:"18",type:"search"})]),!0)])),_:3}),b.show||b.searchVal?(t(),s(x,{key:0,focus:b.showSync,disabled:p.readonly,placeholder:_.placeholderText,maxlength:p.maxlength,class:"uni-searchbar__box-search-input","confirm-type":"search",type:"text",modelValue:b.searchVal,"onUpdate:modelValue":a[0]||(a[0]=e=>b.searchVal=e),style:n({color:p.textColor}),onConfirm:_.confirm,onBlur:_.blur,onFocus:_.emitFocus},null,8,["focus","disabled","placeholder","maxlength","modelValue","style","onConfirm","onBlur","onFocus"])):(t(),s(k,{key:1,class:"uni-searchbar__text-placeholder"},{default:c((()=>[i(u(p.placeholder),1)])),_:1})),b.show&&("always"===p.clearButton||"auto"===p.clearButton&&""!==b.searchVal)&&!p.readonly?(t(),s(v,{key:2,class:"uni-searchbar__box-icon-clear",onClick:_.clear},{default:c((()=>[o(e.$slots,"clearIcon",{},(()=>[r(g,{color:"#c0c4cc",size:"20",type:"clear"})]),!0)])),_:3},8,["onClick"])):h("",!0)])),_:3},8,["style","onClick"]),"always"===p.cancelButton||b.show&&"auto"===p.cancelButton?(t(),s(k,{key:0,onClick:_.cancel,class:"uni-searchbar__cancel"},{default:c((()=>[i(u(_.cancelTextI18n),1)])),_:1},8,["onClick"])):h("",!0)])),_:3})}],["__scopeId","data-v-314f636a"]]),T=S({__name:"search",setup(e){const a=p(JSON.parse(y("history")||"[]")),n=p("");function o(e){if(!e.value.trim().length)return void v({title:"请输入内容！",icon:"error"});const l=a.value.findIndex((a=>a==e.value.trim()));-1!==l&&a.value.splice(l,1),a.value.unshift(e.value.trim()),x("history",JSON.stringify(a.value)),k({url:`/pages/sub/categoryList/categoryList?name=${e.value.trim()}&keyword=${e.value.trim()}`}),n.value=""}function h(){a.value=[],x("history",JSON.stringify(a.value))}return(e,f)=>{const p=w(l("uni-search-bar"),B),y=d,v=m,S=w(l("uni-icons"),V);return t(),s(y,{class:"container"},{default:c((()=>[r(y,{class:"search"},{default:c((()=>[r(p,{onConfirm:o,focus:!0,modelValue:n.value,"onUpdate:modelValue":f[0]||(f[0]=e=>n.value=e)},null,8,["modelValue"])])),_:1}),r(y,{class:"recently"},{default:c((()=>[r(y,{class:"head"},{default:c((()=>[r(v,null,{default:c((()=>[i("最近搜索")])),_:1}),r(y,{class:"trash"},{default:c((()=>[r(S,{type:"trash",size:"24",onClick:h})])),_:1})])),_:1}),r(y,{class:"content"},{default:c((()=>[(t(!0),b(g,null,_(a.value,((e,l)=>(t(),s(y,{class:"tab",key:l,onClick:l=>function(e){const l=a.value.findIndex((a=>a==e));a.value.splice(l,1),a.value.unshift(e),x("history",JSON.stringify(a.value)),k({url:`/pages/sub/categoryList/categoryList?name=${e}&keyword=${e}`})}(e)},{default:c((()=>[i(u(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-43ba596a"]]);export{T as default};
